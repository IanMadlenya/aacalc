{% extends "base.html" %}

{% comment %}

AACalc - Asset Allocation Calculator
Copyright (C) 2009, 2011-2016 Gordon Irlam

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

{% endcomment %}

{% block title %}Asset Allocation Cross Validation{% endblock %}

{% block content %}

<div class="doc">

<h1>Asset Allocation Cross Validation</h1>

<p>
This document reports on the cross validation of the new
<a href="{% url 'start_aa' %}">AACalc asset allocator</a> using
Merton's method against the old AACalc asset allocator which uses
stochastic dynamic programming.
</p>

<p>
The results are not expected to be identical. The new asset allocator
takes a number of computational shortcuts in order to solve the
problem quickly. In particular there isn't a known solution for the
amount to consume in Merton's portfolio problem for many assets and a
stochastic lifespan. Additionally, the new asset allocator assumes
lognormally distributed returns, while the old allocator used the
historical returns distribution. The old asset allocator is unable to
handle contribution volatility. And the new asset allocator uses the
real yield curve, while the old allocator assumed a fixed real risk
free rate.
</p>

<table>
<tr>
<th class="center"> default parameter values </th>
</tr>
<tr>
<td class="left">
age=50
<br>
retirement_age=65
<br>
sex=male
<br>
sex2=none - an individual not a couple
</br>
le_add=6 - additional life expectancy for planning purposes
<br>
db=15k - annual Social Security
<br>
p=200k - portfolio size
<br>
accumulate=0 - pre-retirement periodic contributions
<br>
contrib_vol=1% - contribution volatility
<br>
stocks=7.2%+/-17% - arithmetic annual return and volatility
<br>
bonds=1.1%+/-10%
<br>
corr=7% - stock/bond correlation
<br>
yield_curve_date=2015-12-31
<br>
expense=0% - equity and bond management fees
<br>
purchase_income_annuity=false - no annuitization recommendations
<br>
desired=1000000 - desired income; CRRA utility function throughout operative range
<br>
gamma=4 - coefficient of relative risk aversion
</td>
</tr>
</table>

<p>
The results of the two asset allocators are shown below:
</p>

<table>
<tr> <th colspan=3> stocks </th> <th colspan=3> consume </th> <th rowspan=2> parameters </th> </te>
<tr> <th> SDP </th> <th> AACalc </th> <th> difference </th> <th> SDP </th> <th> AACalc </th> <th> difference </th></tr>
<tr> <td class="right"> 100% </td> <td class="right"> 100% </td> <td class="right">   0% <td class="right">  27,317 </td> <td class="right"> 25,288 </td> <td class="right">  -7% </td> <td class="left"> default </td> </tr>
<tr> <td class="right"> 100% </td> <td class="right"> 100% </td> <td class="right">   0% <td class="right">  15,000 </td> <td class="right"> 14,329 </td> <td class="right">  -4% </td> <td class="left"> p=0 </td> </tr>
<tr> <td class="right">  52% </td> <td class="right">  54% </td> <td class="right">   2% <td class="right">   8,861 </td> <td class="right"> 10,317 </td> <td class="right">  16% </td> <td class="left"> db=10 </td> </tr>
<tr> <td class="right"> 100% </td> <td class="right"> 100% </td> <td class="right">   0% <td class="right">  26,769 </td> <td class="right"> 25,288 </td> <td class="right">  -6% </td> <td class="left"> gamma=2 </td> </tr>
<tr> <td class="right">  94% </td> <td class="right">  92% </td> <td class="right">  -2% <td class="right">  26,639 </td> <td class="right"> 25,129 </td> <td class="right">  -6% </td> <td class="left"> gamma=6 </td> </tr>
<tr> <td class="right"> 100% </td> <td class="right"> 100% </td> <td class="right">   0% <td class="right">  21,244 </td> <td class="right"> 19,694 </td> <td class="right">  -7% </td> <td class="left"> p=100k </td> </tr>
<tr> <td class="right">  91% </td> <td class="right">  88% </td> <td class="right">  -3% <td class="right">  43,164 </td> <td class="right"> 41,584 </td> <td class="right">  -4% </td> <td class="left"> p=500k </td> </tr>
<tr> <td class="right"> 100% </td> <td class="right"> 100% </td> <td class="right">   0% <td class="right">  27,801 </td> <td class="right"> 25,994 </td> <td class="right">  -6% </td> <td class="left"> stocks=8.7%+/-20% </td> </tr>
<tr> <td class="right">  88% </td> <td class="right"> 100% </td> <td class="right">  12% <td class="right">  27,212 </td> <td class="right"> 25,288 </td> <td class="right">  -7% </td> <td class="left"> bonds=3.2%+/-10% </td> </tr>
<tr> <td class="right"> 100% </td> <td class="right"> 100% </td> <td class="right">   0% <td class="right">  32,127 </td> <td class="right"> 27,886 </td> <td class="right"> -13% </td> <td class="left"> age=90, le_add=3, p=100k </td> </tr>
<tr> <td class="right">  91% </td> <td class="right">  99% </td> <td class="right">   8% <td class="right">  36,455 </td> <td class="right"> 34,717 </td> <td class="right">  -5% </td> <td class="left"> age=50, p=500k </td> </tr>
<tr> <td class="right"> 100% </td> <td class="right"> 100% </td> <td class="right">   0% <td class="right">    n.a. </td> <td class="right"> 34,744 </td> <td class="right"> n.a. </td> <td class="left"> age=50, retire=65, accumulate=3000*1.07^y </td> </tr>
<tr> <td class="right">  95% </td> <td class="right">  98% </td> <td class="right">   3% <td class="right">    n.a. </td> <td class="right"> 48,967 </td> <td class="right"> n.a. </td> <td class="left"> age=25, retire=65, accumulate=500*1.07^y </td> </tr>
<tr> <td class="right">  82% </td> <td class="right">  88% </td> <td class="right">   6% <td class="right">  43,583 </td> <td class="right"> 41,609 </td> <td class="right">  -5% </td> <td class="left"> desired=40k, p=500k </td> </tr>
<tr> <td class="right"> 100% </td> <td class="right"> 100% </td> <td class="right">   0% <td class="right">  26,276 </td> <td class="right"> 24,420 </td> <td class="right">  -7% </td> <td class="left"> female </td> </tr>
<tr> <td class="right"> 100% </td> <td class="right"> 100% </td> <td class="right">   0% <td class="right">  55,449 </td> <td class="right"> 51,170 </td> <td class="right">  -8% </td> <td class="left"> sex2=female, p=500k </td> </tr>
</table>

<p>
Since an 80% confidence interval for asset allocation spans a whopping
40-50%, the accuracy of the recommendations of the new allocator is
plenty good enough. The consumption recommendations are also fairly
accurate.  They lose accuracy when there is negligible Social Security
and at advanced ages.
</p>

<p>
For typical scenarios, as shown above, the allocation to stocks is
close to 100%. To check whether results are comparable when this is
not the case we prepared a second set of results for affluent
scenarios.
</p>

<table>
<tr> <th colspan=3> stocks </th> <th colspan=3> consume </th> <th rowspan=2> parameters </th> </te>
<tr> <th> SDP </th> <th> AACalc </th> <th> difference </th> <th> SDP </th> <th> AACalc </th> <th> difference </th></tr>
<tr> <td class="right">  75% </td> <td class="right">  71% </td> <td class="right">  -4% <td class="right">  67,058 </td> <td class="right"> 67,351 </td> <td class="right">   0% </td> <td class="left"> p=1000k </td> </tr>
<tr> <td class="right">  52% </td> <td class="right">  54% </td> <td class="right">   2% <td class="right">  44,228 </td> <td class="right"> 51,545 </td> <td class="right">  17% </td> <td class="left"> p=1000k, db=10 </td> </tr>
<tr> <td class="right"> 100% </td> <td class="right"> 100% </td> <td class="right">   0% <td class="right">  74,084 </td> <td class="right"> 70,598 </td> <td class="right">  -5% </td> <td class="left"> p=1000k, gamma=2 </td> </tr>
<tr> <td class="right">  53% </td> <td class="right">  47% </td> <td class="right">  -6% <td class="right">  60,936 </td> <td class="right"> 64,788 </td> <td class="right">   6% </td> <td class="left"> p=1000k, gamma=6 </td> </tr>
<tr> <td class="right">  68% </td> <td class="right">  64% </td> <td class="right">  -4% <td class="right">  68,327 </td> <td class="right"> 68,797 </td> <td class="right">   1% </td> <td class="left"> p=1000k, stocks=8.7%+/-20% </td> </tr>
<tr> <td class="right">  61% </td> <td class="right">  71% </td> <td class="right">  10% <td class="right">  68,435 </td> <td class="right"> 69,796 </td> <td class="right">   2% </td> <td class="left"> p=1000k, bonds=3.2%+/-10% </td> </tr>
<tr> <td class="right">  81% </td> <td class="right">  68% </td> <td class="right"> -13% <td class="right">  77,214 </td> <td class="right"> 93,029 </td> <td class="right">  20% </td> <td class="left"> p=500k, age=90, le_add=3 </td> </tr>
<tr> <td class="right">  61% </td> <td class="right">  58% </td> <td class="right">  -3% <td class="right"> 109,213 </td> <td class="right"> 01,213 </td> <td class="right">  -7% </td> <td class="left"> p=2500k, age=50 </td> </tr>
<tr> <td class="right">  70% </td> <td class="right">  66% </td> <td class="right">  -4% <td class="right">    n.a. </td> <td class="right"> 94,387 </td> <td class="right"> n.a. </td> <td class="left"> p=1000k, age=50, retire=65, accumulate=3000*1.07^y </td> </tr>
<tr> <td class="right">  74% </td> <td class="right">  69% </td> <td class="right">  -5% <td class="right">    n.a. </td> <td class="right"> 84,477 </td> <td class="right"> n.a. </td> <td class="left"> p=500k, age=25, retire=65, accumulate=500*1.07^y </td> </tr>
<tr> <td class="right"> 100% </td> <td class="right">  89% </td> <td class="right"> -11% <td class="right"> 143,453 </td> <td class="right"> 52,620 </td> <td class="right">   6% </td> <td class="left"> p=2500k, desired=40k </td> </tr>
<tr> <td class="right">  76% </td> <td class="right">  72% </td> <td class="right">  -4% <td class="right">  63,643 </td> <td class="right"> 63,340 </td> <td class="right">  -0% </td> <td class="left"> p=1000k, sex=female </td> </tr>
<tr> <td class="right">  72% </td> <td class="right">  68% </td> <td class="right">  -4% <td class="right"> 142,120 </td> <td class="right"> 44,344 </td> <td class="right">   2% </td> <td class="left"> p=2500k, sex2=female </td> </tr>
<tr> <td class="right">  63% </td> <td class="right">  61% </td> <td class="right">  -2% <td class="right"> 135,458 </td> <td class="right"> 44,653 </td> <td class="right">   7% </td> <td class="left"> p=2500k </td> </tr>
</table>

<p>
Again there is reasonably good agreement, with the biggest
discrepancies being for negligible Social Security and advanced ages.
</p>

</div>

{% endblock %}
